package com.center.buuluu.util;

import org.apache.commons.lang.StringUtils;

public class EmojiUtil {

    /**
     * æ£€æµ‹æ˜¯å¦æœ‰emojiå­—ç¬¦
     * @param source
     * @return ä¸€æ—¦å«æœ‰å°±æŠ›å‡º
     */
    public static boolean containsEmoji(String source) {
        if (StringUtils.isBlank(source)) {
            return false;
        }
        
        int len = source.length();
        
        for (int i = 0; i < len; i++) {
            char codePoint = source.charAt(i);
            
            if (!isEmojiCharacter(codePoint)) {
                //do nothingï¼Œåˆ¤æ–­åˆ°äº†è¿™é‡Œè¡¨æ˜ï¼Œç¡®è®¤æœ‰è¡¨æƒ…å­—ç¬¦
                return true;
            }
        }
        
        return false;
    }

    private static boolean isEmojiCharacter(char codePoint) {
        return (codePoint == 0x0) || 
                (codePoint == 0x9) ||                            
                (codePoint == 0xA) ||
                (codePoint == 0xD) ||
                ((codePoint >= 0x20) && (codePoint <= 0xD7FF)) ||
                ((codePoint >= 0xE000) && (codePoint <= 0xFFFD)) ||
                ((codePoint >= 0x10000) && (codePoint <= 0x10FFFF));
    }
    
    /**
     * è¿‡æ»¤emoji æˆ–è€… å…¶ä»–éæ–‡å­—ç±»å‹çš„å­—ç¬¦
     * @param source
     * @return
     */
    public static String filterEmoji(String source) {
        
        if (!containsEmoji(source)) {
            return source;//å¦‚æœä¸åŒ…å«ï¼Œç›´æ¥è¿”å›
        }
        //åˆ°è¿™é‡Œé“å®šåŒ…å«
        StringBuilder buf = null;
        
        int len = source.length();
        
        for (int i = 0; i < len; i++) {
            char codePoint = source.charAt(i);
            
            if (isEmojiCharacter(codePoint)) {
                if (buf == null) {
                    buf = new StringBuilder(source.length());
                }
                
                buf.append(codePoint);
            } else {
            }
        }
        
        if (buf == null) {
            return source;//å¦‚æœæ²¡æœ‰æ‰¾åˆ° emojiè¡¨æƒ…ï¼Œåˆ™è¿”å›æºå­—ç¬¦ä¸²
        } else {
            if (buf.length() == len) {//è¿™é‡Œçš„æ„ä¹‰åœ¨äºå°½å¯èƒ½å°‘çš„toStringï¼Œå› ä¸ºä¼šé‡æ–°ç”Ÿæˆå­—ç¬¦ä¸²
                buf = null;
                return source;
            } else {
                return buf.toString();
            }
        }
        
    }
    
    public static void main(String aaa[]){
    	String aa="ğŸ˜„ğŸ˜ƒğŸ˜€ğŸ˜Šâ˜ºğŸ˜‰ğŸ˜ğŸ˜˜ğŸ˜šğŸ˜—ğŸ˜™ğŸ˜œğŸ˜ğŸ˜›ğŸ˜³ğŸ˜ğŸ˜”ğŸ˜ŒğŸ˜’ğŸ˜ğŸ˜£ğŸ˜¢ğŸ˜‚ğŸ˜­ğŸ˜ªğŸ˜¥ğŸ˜°ğŸ˜…ğŸ˜“ğŸ˜©ğŸ˜«ğŸ˜¨ğŸ˜±ğŸ˜ ğŸ˜¡ğŸ˜¤ğŸ˜–ğŸ˜†ğŸ˜‹ğŸ˜·ğŸ˜ğŸ˜´ğŸ˜µğŸ˜²ğŸ˜ŸğŸ˜¦ğŸ˜§ğŸ˜ˆğŸ‘¿ğŸ˜®ğŸ˜¬ğŸ˜ğŸ˜•ğŸ˜¯ğŸ˜¶ğŸ˜‡ğŸ˜ğŸ˜‘ğŸ‘²ğŸ‘³ğŸ‘®ğŸ‘·ğŸ’‚ğŸ‘¶ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘´ğŸ‘µğŸ‘±ğŸ‘¼ğŸ‘¸ğŸ˜ºğŸ˜¸ğŸ˜»ğŸ˜½ğŸ‘ºğŸ‘¹ğŸ˜¾ğŸ˜¹ğŸ˜¿ğŸ™€ğŸ˜¼ğŸ™ˆğŸ™‰ğŸ™ŠğŸ’€ğŸ‘½ğŸ’©ğŸ”¥ğŸ’§ğŸ’¦ğŸ’¢ğŸ’¥ğŸ’«ğŸŒŸâœ¨ğŸ’¤ğŸ’¨ğŸ‘‚ğŸ‘€ğŸ‘ƒğŸ‘…ğŸ‘„ğŸ‘ğŸ‘ğŸ‘ŒğŸ‘ŠâœŠâœŒğŸ‘‹ğŸ™ŒğŸ‘ˆğŸ‘‰ğŸ‘‡ğŸ‘†ğŸ‘âœ‹ğŸ™â˜ğŸ‘ğŸ’ªğŸš¶ğŸƒğŸ’ƒğŸ‘«ğŸ‘ªğŸ‘¬ğŸ‘­ğŸ’ğŸ’‘ğŸ‘¯ğŸ’…ğŸ’‡ğŸ’†ğŸ™‹ğŸ’ğŸ™…ğŸ™†ğŸ‘°ğŸ™ğŸ™ğŸ™‡ğŸ©ğŸ‘’ğŸ‘‘ğŸ‘ŸğŸ‘ğŸ‘¡ğŸ‘ ğŸ‘¢ğŸ‘•ğŸ‘”ğŸ’¼ğŸ‘™ğŸ‘˜ğŸ‘–ğŸ½ğŸ‘—ğŸ‘šğŸ‘œğŸ‘ğŸ‘›ğŸ‘“ğŸ€ğŸŒ‚ğŸ’„ğŸ’›ğŸ’™ğŸ’œğŸ’šâ¤ğŸ’”ğŸ’—ğŸ’‹ğŸ’ŒğŸ’˜ğŸ’ğŸ’–ğŸ’•ğŸ’“ğŸ’ğŸ’ğŸ‘¤ğŸ‘¥ğŸ’¬ğŸ‘£ğŸ’­ğŸ¶ğŸºğŸ±ğŸ­ğŸ¹ğŸ°ğŸ¸ğŸ—ğŸ®ğŸ½ğŸ·ğŸ»ğŸ¨ğŸ¯ğŸµğŸ’ğŸ´ğŸ‘ğŸ˜ğŸ¼ğŸ§ğŸğŸ’ğŸ¦ğŸ¤ğŸ¥ğŸ£ğŸ”ğŸğŸ¢ğŸšğŸ™ğŸŒğŸğŸœğŸğŸ›ğŸ ğŸŸğŸ¬ğŸ³ğŸ‹ğŸ„ğŸğŸ€ğŸƒğŸ…ğŸ‡ğŸ‰ğŸğŸğŸ¡ğŸ²ğŸ‚ğŸğŸ–ğŸ•ğŸ“ğŸŠğŸ«ğŸªğŸ†ğŸˆğŸ©ğŸ¾ğŸ’ğŸŒ¸ğŸŒ·ğŸ€ğŸŒ¹ğŸŒ»ğŸŒºğŸ„ğŸŒ¾ğŸŒ¿ğŸ‚ğŸƒğŸğŸŒ´ğŸŒ²ğŸŒ³ğŸŒ°ğŸŒ±ğŸŒ¼ğŸŒğŸŒğŸŒğŸŒšğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ™ğŸŒ›ğŸŒœğŸŒ˜ğŸŒ—ğŸŒ–ğŸŒ•ğŸŒğŸŒğŸŒğŸŒ‹ğŸŒŒğŸŒ â­â˜€â›…â˜âš¡â˜”â„â›„ğŸŒŠğŸŒˆğŸŒğŸŒ€ğŸğŸ’ğŸğŸ’ğŸ“ğŸğŸ†ğŸ„ğŸ…ğŸ‘»ğŸƒğŸ‘ğŸğŸ‡ğŸğŸ‹ğŸ‰ğŸŠğŸˆğŸŒğŸ”®ğŸ¥ğŸ“·ğŸ“¹ğŸ“¼ğŸ’¿ğŸ“€ğŸ’½ğŸ“ ğŸ“ŸğŸ“â˜ğŸ“±ğŸ’»ğŸ’¾ğŸ“¡ğŸ“ºğŸ“»ğŸ”ŠğŸ”‰ğŸ”ˆğŸ”‡ğŸ””ğŸ”•ğŸ“¢ğŸ“£â³âŒ›â°ğŸ”ğŸ”‘ğŸ”ğŸ”ğŸ”’ğŸ”“âŒšğŸ’¡ğŸ”¦ğŸ”†ğŸ”…ğŸ”ŒğŸ”‹ğŸ”ğŸ›ğŸ›€ğŸš¿ğŸš½ğŸ”§ğŸ”©ğŸ”¨ğŸ’‰ğŸ’ŠğŸ”ªğŸ”«ğŸ’£ğŸš¬ğŸšªğŸ’°ğŸ’´ğŸ’µğŸ’·ğŸ’¶ğŸ’³ğŸ’¸ğŸ“²ğŸ“§ğŸ“¥ğŸ“¤âœ‰ğŸ“©ğŸ“¨ğŸ“¦ğŸ“®ğŸ“­ğŸ“¬ğŸ“ªğŸ“«ğŸ“¯ğŸ“ğŸ“„ğŸ“ƒğŸ“‘ğŸ“ŠğŸ“ˆğŸ“‰ğŸ“œğŸ“‹ğŸ“…ğŸ“†ğŸ“‡ğŸ“ğŸ“‚ğŸ“ğŸ“âœâœ’ğŸ“ğŸ“Œâœ‚ğŸ“•ğŸ“—ğŸ“˜ğŸ“™ğŸ““ğŸ“”ğŸ“’ğŸ“šğŸ“–ğŸ”–ğŸ“›ğŸ”¬ğŸ”­ğŸ“°ğŸ¶ğŸµğŸ¼ğŸ§ğŸ¤ğŸ¬ğŸ¨ğŸ¹ğŸ»ğŸºğŸ·ğŸ¸ğŸ‘¾ğŸ®ğŸƒğŸ´ğŸ€„ğŸ²ğŸ¯ğŸˆğŸ€â›³ğŸ³ğŸ‰ğŸ±ğŸ¾âš¾âš½ğŸšµğŸš´ğŸğŸ‡ğŸ†ğŸ¿ğŸ‚ğŸŠğŸ„ğŸ£â˜•ğŸµğŸ¶ğŸ¼ğŸ•ğŸ´ğŸ·ğŸ¹ğŸ¸ğŸ»ğŸºğŸ”ğŸŸğŸ—ğŸ–ğŸğŸ›ğŸ¤ğŸ±ğŸ£ğŸ¥ğŸ™ğŸ˜ğŸšğŸœğŸ®ğŸ©ğŸğŸ³ğŸ¡ğŸ¢ğŸ²ğŸ¦ğŸ¨ğŸ§ğŸ‚ğŸ°ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸğŸğŸŠğŸ‹ğŸŒğŸˆğŸ‘ğŸ“ğŸ‰ğŸ‡ğŸ’ğŸğŸğŸ ğŸ†ğŸ…ğŸŒ½ğŸ ğŸ¡ğŸ«ğŸ¢ğŸ£ğŸ¥ğŸ¦ğŸ¤ğŸ¬â›ªğŸ’’ğŸ¨ğŸ©ğŸªğŸŒ‡ğŸŒ†ğŸ¯ğŸ°â›ºğŸ­ğŸ—¼ğŸ—¾ğŸ—»ğŸŒ„ğŸŒ…ğŸŒƒğŸ—½ğŸŒ‰ğŸš¤â›µğŸš¢ğŸ¢â›²ğŸ¡ğŸ ğŸš£âš“ğŸš€âœˆğŸ’ºğŸšğŸš‚ğŸšŠğŸš‰ğŸšğŸš†ğŸš„ğŸš…ğŸšˆğŸšğŸšŒğŸšğŸšƒğŸš‹ğŸšğŸš‡ğŸš™ğŸš˜ğŸš—ğŸš•ğŸš–ğŸš›ğŸššğŸš¨ğŸš“ğŸš”ğŸš’ğŸš‘ğŸšğŸš²ğŸ«ğŸšğŸ’ˆğŸšœğŸš ğŸšŸğŸš¡ğŸš¦ğŸš¥âš ğŸš§ğŸ”°â›½ğŸ®ğŸ°â™¨ğŸ—¿ğŸªğŸ­ğŸ“ğŸš©ğŸ‡ªğŸ‡¸ğŸ‡«ğŸ‡·ğŸ‡ºğŸ‡¸ğŸ‡¨ğŸ‡³ğŸ‡©ğŸ‡ªğŸ‡°ğŸ‡·ğŸ‡¯ğŸ‡µğŸ‡®ğŸ‡¹ğŸ‡·ğŸ‡ºğŸ‡¬ğŸ‡§1âƒ£2âƒ£3âƒ£4âƒ£5âƒ£6âƒ£7âƒ£ğŸ”£#âƒ£ğŸ”¢ğŸ”Ÿ0âƒ£9âƒ£8âƒ£â¬†â¬‡â¬…â¡ğŸ” ğŸ”¡ğŸ”¤â†—â†–â†˜â†™â†”â†•ğŸ”„â„¹â†ªâ†©ğŸ”½ğŸ”¼â–¶â—€âªâ©â«â¬â¤µâ¤´ğŸ†—ğŸ”€ğŸ”ğŸ”‚ğŸ†•ğŸ†™ğŸ†’ğŸ†“ğŸˆµğŸˆ³ğŸˆ¯ğŸˆğŸ¦ğŸ“¶ğŸ†–ğŸˆ´ğŸˆ²ğŸ‰ğŸˆ¹ğŸˆºğŸˆ¶ğŸˆšğŸš»ğŸš¹ğŸšºğŸš¼ğŸš¾ğŸš°ğŸš®â“‚ğŸˆ‚ğŸˆ¸ğŸˆ·ğŸš­â™¿ğŸ…¿ğŸ›‚ğŸ›„ğŸ›…ğŸ›ƒğŸ‰‘ãŠ™ãŠ—ğŸ†‘ğŸ†˜ğŸ†”ğŸš«ğŸ”ğŸ“µğŸš¯â‡âœ³â›”ğŸš¸ğŸš·ğŸš³ğŸš±ââœ…âœ´ğŸ’ŸğŸ†šğŸ“³ğŸ“´ğŸ…°ğŸ…±ğŸ†ğŸ…¾ğŸ’ â¿â™»â™â™â™Œâ™‹â™Šâ™‰â™ˆâ™â™â™‘â™’â™“â›ğŸ”¯ğŸ§ğŸ’¹ğŸ’²ğŸ’±Â©Â®â„¢ğŸ”œğŸ”›ğŸ”™ğŸ”šğŸ”ã€°ã€½âŒâ­•â—â“â•â”ğŸ”ƒğŸ•›ğŸ•§ğŸ•ğŸ•œğŸ•‘ğŸ•ğŸ•’ğŸ•–ğŸ••ğŸ• ğŸ•”ğŸ•ŸğŸ•“ğŸ•ğŸ•—ğŸ•˜ğŸ•™ğŸ•šğŸ•¡ğŸ•¢ğŸ•£ğŸ•¤ğŸ•¥ğŸ•¦âœ–â•â–â—âœ”ğŸ’¯ğŸ’®â™¦â™£â™¥â™ â˜‘ğŸ”˜ğŸ”—â°ğŸ”±ğŸ”²ğŸ”³â—¼â—»â—¾â—½â–ªâ–«ğŸ”ºğŸ”»ğŸ”µğŸ”´âšªâš«â¬›â¬œğŸ”¶ğŸ”·ğŸ”¸ğŸ”¹";
		String bb="çš„æ“º";
		System.out.println("aa========"+filterEmoji(aa)+"bb==========="+filterEmoji(bb));
		System.out.println("aa========"+containsEmoji(aa)+"bb==========="+containsEmoji(bb));
		
    }
}